# AntiOverengineering_RULES.md (AOE)

## üéØ –ü—Ä–∏–Ω—Ü–∏–ø—ã

**KISS** ‚Äî —Ä–µ—à–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç—ã–º.  
**YAGNI** ‚Äî –Ω–µ –ø–∏—à–∏ –∫–æ–¥ –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ ¬´–º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è¬ª.

---

## ‚ùå –ó–ê–ü–†–ï–©–ï–ù–û

| # | –ß—Ç–æ | –ü–æ—á–µ–º—É |
|---|-----|--------|
| 1 | –ö–ª–∞—Å—Å—ã (class) | –¢–æ–ª—å–∫–æ `def` —Ñ—É–Ω–∫—Ü–∏–∏ |
| 2 | –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã | –ö—Ä–æ–º–µ `@st.cache_resource` |
| 3 | –ê–±—Å—Ç—Ä–∞–∫—Ü–∏–∏/–§–∞–±—Ä–∏–∫–∏ | –ü—Ä–æ—Å—Ç–æ–π if/else |
| 4 | RetrievalQA chain | –ò—Å–ø–æ–ª—å–∑—É–µ–º retriever + llm –Ω–∞–ø—Ä—è–º—É—é |
| 5 | –ê–≥–µ–Ω—Ç—ã/Tools | –ü—Ä–æ—Å—Ç–æ–π RAG –±–µ–∑ –∞–≥–µ–Ω—Ç–æ–≤ |
| 6 | Async/await | –¢–æ–ª—å–∫–æ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥ |
| 7 | Docker | pip install –∏ –≥–æ—Ç–æ–≤–æ |
| 8 | Cloud API (OpenAI –∏ –¥—Ä.) | –¢–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—ã–π Ollama |
| 9 | SQL/NoSQL –±–∞–∑—ã | –¢–æ–ª—å–∫–æ FAISS –Ω–∞ –¥–∏—Å–∫–µ |
| 10 | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è | –ü—É–±–ª–∏—á–Ω—ã–π —á–∞—Ç |
| 11 | logging –º–æ–¥—É–ª—å | print() –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ |

---

## ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–ª—é—á–µ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ–º RetrievalQA chain

```python
# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: retriever + llm –Ω–∞–ø—Ä—è–º—É—é
docs = retriever.invoke(question)
if not docs:
    return "–ù–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏", []
answer = llm.invoke(prompt)

# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: RetrievalQA chain
qa = RetrievalQA.from_chain_type(llm, retriever=retriever)
result = qa.invoke({"query": question})  # –ú–∞–≥–∏—è –≤–Ω—É—Ç—Ä–∏
```

### –ü–æ—á–µ–º—É –Ω–∞–ø—Ä—è–º—É—é –ª—É—á—à–µ:
- –ú–æ–∂–µ–º –ø—Ä–æ–≤–µ—Ä–∏—Ç—å `docs` –î–û –≤—ã–∑–æ–≤–∞ LLM (—ç–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏)
- –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø—Ä–æ–º–ø—Ç–æ–º
- –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å `query` vs `question` –∫–ª—é—á–∞–º–∏

---

## üéõÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

```
Splitter: RecursiveCharacterTextSplitter(chunk_size=1000, chunk_overlap=200)
Retriever: search_kwargs={"k": 4}
LLM: OllamaLLM(model="llama3")
Embeddings: HuggingFaceEmbeddings("sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2")
Vectorstore: FAISS
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ (–º–∏–Ω–∏–º—É–º —Ñ–∞–π–ª–æ–≤)

```
‚îú‚îÄ‚îÄ app.py           # Streamlit UI + retriever + llm
‚îú‚îÄ‚îÄ rag_setup.py     # –°–±–æ—Ä–∫–∞ –∏–Ω–¥–µ–∫—Å–∞
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ books/           # PDF —Ñ–∞–π–ª—ã
‚îî‚îÄ‚îÄ README.md
```

---

## ‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ code review

–ï—Å–ª–∏ Copilot –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç:
- –ö–ª–∞—Å—Å—ã ‚Üí **–û–¢–ö–õ–û–ù–ò–¢–¨**, –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏
- RetrievalQA chain ‚Üí **–û–¢–ö–õ–û–ù–ò–¢–¨**, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å retriever + llm –Ω–∞–ø—Ä—è–º—É—é
- Async –∫–æ–¥ ‚Üí **–û–¢–ö–õ–û–ù–ò–¢–¨**, —Ç–æ–ª—å–∫–æ sync
- Cloud API –≤—ã–∑–æ–≤—ã ‚Üí **–û–¢–ö–õ–û–ù–ò–¢–¨**, —Ç–æ–ª—å–∫–æ Ollama

**–°—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–∞–≤–∏–ª–∞:** ¬´–°–æ–≥–ª–∞—Å–Ω–æ AOE –ø—Ä–∞–≤–∏–ª–æ #N¬ª