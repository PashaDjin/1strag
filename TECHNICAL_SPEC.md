# üìã –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞: RAG-—á–∞—Ç–±–æ—Ç –ø–æ —Ä—É—Å—Å–∫–∏–º PDF

> **–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 2.0  
> **–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 21 —è–Ω–≤–∞—Ä—è 2026  
> **–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞:** MVP –≥–æ—Ç–æ–≤, —Ç—Ä–µ–±—É–µ—Ç—Å—è —É–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–æ–≤

---

## üìë –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ](#1-–æ–±—â–µ–µ-–æ–ø–∏—Å–∞–Ω–∏–µ)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#2-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–æ–¥–∏–Ω-–ø–æ—Ç–æ–∫)
3. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤](#3-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-—Ñ–∞–π–ª–æ–≤)
4. [–û–ø–∏—Å–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏ —Ñ—É–Ω–∫—Ü–∏–π](#4-–æ–ø–∏—Å–∞–Ω–∏–µ-—Ñ–∞–π–ª–æ–≤-–∏-—Ñ—É–Ω–∫—Ü–∏–π)
5. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#5-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è-—á–µ—Ä–µ–∑-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
6. [–°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç](#6-—Å–∏—Å—Ç–µ–º–Ω—ã–π-–ø—Ä–æ–º–ø—Ç-–∫—Ä–∏—Ç–∏—á–Ω–æ-–¥–ª—è-–∫–∞—á–µ—Å—Ç–≤–∞)
7. [UI (Streamlit)](#7-ui-streamlit)
8. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#8-—á—Ç–æ-–Ω—É–∂–Ω–æ-—Å–¥–µ–ª–∞—Ç—å-–≤–Ω–µ-–∫–æ–¥–∞)
9. [Roadmap —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏](#9-roadmap-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
10. [Definition of Done](#10-definition-of-done-–∫–æ–≥–¥–∞-—Å—á–∏—Ç–∞–µ–º-–≥–æ—Ç–æ–≤—ã–º)
11. [–†–∏—Å–∫–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è](#11-—Ä–∏—Å–∫–∏-–∏-–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)
12. [–ö–ª—é—á–µ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è](#12-–∫–ª—é—á–µ–≤—ã–µ-—Ä–µ—à–µ–Ω–∏—è-–ø–æ—á–µ–º—É-—Ç–∞–∫-–∞-–Ω–µ-–∏–Ω–∞—á–µ)
13. [**–ê–ù–ê–õ–ò–ó –ö–ê–ß–ï–°–¢–í–ê –û–¢–í–ï–¢–û–í**](#13-–∞–Ω–∞–ª–∏–∑-–∫–∞—á–µ—Å—Ç–≤–∞-–æ—Ç–≤–µ—Ç–æ–≤) ‚≠ê NEW
14. [**–í–´–Ø–í–õ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ –ò –£–ó–ö–ò–ï –ú–ï–°–¢–ê**](#14-–≤—ã—è–≤–ª–µ–Ω–Ω—ã–µ-–ø—Ä–æ–±–ª–µ–º—ã-–∏-—É–∑–∫–∏–µ-–º–µ—Å—Ç–∞) ‚≠ê NEW
15. [**ROADMAP –£–õ–£–ß–®–ï–ù–ò–ô**](#15-roadmap-—É–ª—É—á—à–µ–Ω–∏–π) ‚≠ê NEW

---

## 1. –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

**–ù–∞–∑–≤–∞–Ω–∏–µ:** 1strag (First RAG)

**–°—É—Ç—å:** –õ–æ–∫–∞–ª—å–Ω—ã–π —á–∞—Ç–±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É PDF-—Ñ–∞–π–ª–æ–≤ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ, –ø–æ–∫–∞–∑—ã–≤–∞—è –∏—Å—Ç–æ—á–Ω–∏–∫–∏ (—Ñ–∞–π–ª + —Å—Ç—Ä–∞–Ω–∏—Ü–∞).

**–¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏, –∏–∑—É—á–∞—é—â–∏–µ RAG; —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã, —Ä–∞–±–æ—Ç–∞—é—â–∏–µ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.

**–°—Ç–µ–∫:**
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í–µ—Ä—Å–∏—è |
|-----------|------------|--------|
| –Ø–∑—ã–∫ | Python | 3.11+ |
| UI Framework | Streamlit | latest |
| RAG Pipeline | LangChain | latest |
| Vector Store | FAISS (faiss-cpu) | latest |
| LLM | Ollama (llama3) | local |
| Embeddings | HuggingFace (paraphrase-multilingual-MiniLM-L12-v2) | 384 dim |
| PDF Parser | PyPDF | latest |

**–¢–µ–∫—É—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–±–æ—Ä–∫–∏ (–∞–∫—Ç—É–∞–ª—å–Ω—ã–π config.json):**
```json
{
  "embed_model": "sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2",
  "chunk_size": 1500,
  "chunk_overlap": 300,
  "chunk_count": 803,
  "pdf_count": 1,
  "pdf_files": ["–ì–µ—Ä–∞—Å–∏–º–µ–Ω–∫–æ –ê –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å –¥–ª—è —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–π.pdf"]
}
```

---

## 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–æ–¥–∏–Ω –ø–æ—Ç–æ–∫)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         –°–ë–û–†–ö–ê –ò–ù–î–ï–ö–°–ê                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                 ‚îÇ
‚îÇ  books/*.pdf                                                    ‚îÇ
‚îÇ       ‚îÇ                                                         ‚îÇ
‚îÇ       ‚ñº                                                         ‚îÇ
‚îÇ  PyPDFLoader(mode="page")                                       ‚îÇ
‚îÇ       ‚îÇ                                                         ‚îÇ
‚îÇ       ‚ñº                                                         ‚îÇ
‚îÇ  [Document(text, metadata={source, page}), ...]                 ‚îÇ
‚îÇ       ‚îÇ                                                         ‚îÇ
‚îÇ       ‚ñº                                                         ‚îÇ
‚îÇ  RecursiveCharacterTextSplitter(CHUNK_SIZE, CHUNK_OVERLAP)      ‚îÇ
‚îÇ       ‚îÇ                                                         ‚îÇ
‚îÇ       ‚ñº                                                         ‚îÇ
‚îÇ  chunks[] ‚îÄ‚îÄ‚ñ∫ chunks.jsonl (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, DEBUG_DUMP_CHUNKS=1)   ‚îÇ
‚îÇ       ‚îÇ                                                         ‚îÇ
‚îÇ       ‚ñº                                                         ‚îÇ
‚îÇ  HuggingFaceEmbeddings(multilingual)                            ‚îÇ
‚îÇ       ‚îÇ                                                         ‚îÇ
‚îÇ       ‚ñº                                                         ‚îÇ
‚îÇ  FAISS.from_documents() ‚îÄ‚îÄ‚ñ∫ rag_index/                          ‚îÇ
‚îÇ                              ‚îú‚îÄ‚îÄ index.faiss                    ‚îÇ
‚îÇ                              ‚îú‚îÄ‚îÄ index.pkl                      ‚îÇ
‚îÇ                              ‚îî‚îÄ‚îÄ config.json (–ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–±–æ—Ä–∫–∏) ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         –†–ê–ë–û–¢–ê –ß–ê–¢–ê                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                 ‚îÇ
‚îÇ  –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –≤–æ–ø—Ä–æ—Å                                     ‚îÇ
‚îÇ       ‚îÇ                                                         ‚îÇ
‚îÇ       ‚ñº                                                         ‚îÇ
‚îÇ  FAISS.load_local("rag_index")                                  ‚îÇ
‚îÇ       ‚îÇ                                                         ‚îÇ
‚îÇ       ‚ñº                                                         ‚îÇ
‚îÇ  retriever = vectorstore.as_retriever(search_kwargs={"k": TOP_K})‚îÇ
‚îÇ       ‚îÇ                                                         ‚îÇ
‚îÇ       ‚ñº                                                         ‚îÇ
‚îÇ  docs = retriever.invoke(full_question)                         ‚îÇ
‚îÇ       ‚îÇ                                                         ‚îÇ
‚îÇ       ‚ñº                                                         ‚îÇ
‚îÇ  –ï—Å–ª–∏ docs –ø—É—Å—Ç–æ–π ‚Üí "–Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏" (–ë–ï–ó LLM)            ‚îÇ
‚îÇ       ‚îÇ                                                         ‚îÇ
‚îÇ       ‚ñº                                                         ‚îÇ
‚îÇ  –°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–º–ø—Ç (context + question) ‚Üí Ollama LLM            ‚îÇ
‚îÇ       ‚îÇ                                                         ‚îÇ
‚îÇ       ‚ñº                                                         ‚îÇ
‚îÇ  –û—Ç–≤–µ—Ç + Sources (—Ñ–∞–π–ª.pdf [—Å—Ç—Ä. N])                            ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 2.1 –ü–æ—á–µ–º—É –Ω–µ RetrievalQA chain?

–í–º–µ—Å—Ç–æ `RetrievalQA.from_chain_type()` –º—ã –≤—ã–∑—ã–≤–∞–µ–º retriever –∏ LLM –Ω–∞–ø—Ä—è–º—É—é:
- –ú–æ–∂–µ–º –ø—Ä–æ–≤–µ—Ä–∏—Ç—å `docs` –î–û –≤—ã–∑–æ–≤–∞ LLM (—ç–∫–æ–Ω–æ–º–∏–º –≤—Ä–µ–º—è –µ—Å–ª–∏ –Ω–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)
- –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø—Ä–æ–º–ø—Ç–æ–º
- –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å `query` vs `question` –∫–ª—é—á–∞–º–∏ –≤ —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ä—Å–∏—è—Ö LangChain

---

## 3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
1strag/
‚îú‚îÄ‚îÄ app.py                  # Streamlit UI + retriever + llm –Ω–∞–ø—Ä—è–º—É—é
‚îú‚îÄ‚îÄ rag_setup.py            # –§—É–Ω–∫—Ü–∏–∏ —Å–±–æ—Ä–∫–∏ –∏–Ω–¥–µ–∫—Å–∞
‚îú‚îÄ‚îÄ requirements.txt        # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ README.md               # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ AntiOverengineering_RULES.md  # –ü—Ä–∞–≤–∏–ª–∞
‚îú‚îÄ‚îÄ TECHNICAL_SPEC.md       # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ .gitignore              # –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è git
‚îÇ
‚îú‚îÄ‚îÄ books/                  # PDF –¥–ª—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ .gitkeep            # –ß—Ç–æ–±—ã –ø–∞–ø–∫–∞ –±—ã–ª–∞ –≤ git
‚îÇ
‚îú‚îÄ‚îÄ rag_index/              # FAISS –∏–Ω–¥–µ–∫—Å (—Å–æ–∑–¥–∞—ë—Ç—Å—è, –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è)
‚îÇ   ‚îú‚îÄ‚îÄ index.faiss
‚îÇ   ‚îú‚îÄ‚îÄ index.pkl
‚îÇ   ‚îî‚îÄ‚îÄ config.json         # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–±–æ—Ä–∫–∏ (chunk_size, overlap, model)
‚îÇ
‚îî‚îÄ‚îÄ chunks.jsonl            # –î–∞–º–ø —á–∞–Ω–∫–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, DEBUG_DUMP_CHUNKS=1)
```

**–ò—Ç–æ–≥–æ: 7 —Ñ–∞–π–ª–æ–≤ –∫–æ–¥–∞/–∫–æ–Ω—Ñ–∏–≥–∞ + 2 –ø–∞–ø–∫–∏**

---

## 4. –û–ø–∏—Å–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏ —Ñ—É–Ω–∫—Ü–∏–π

### 4.1 `rag_setup.py`

–û—Ç–≤–µ—á–∞–µ—Ç –∑–∞: –∑–∞–≥—Ä—É–∑–∫—É PDF, —á–∞–Ω–∫–∏–Ω–≥, —Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞.

```
–§–£–ù–ö–¶–ò–ò:

get_pdf_files(books_dir: str) -> list[str]
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø—É—Ç–µ–π –∫ PDF –≤ –ø–∞–ø–∫–µ books/

load_documents(pdf_paths: list[str]) -> list[Document]
    –ó–∞–≥—Ä—É–∂–∞–µ—Ç PDF –ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–æ —á–µ—Ä–µ–∑ PyPDFLoader(mode="page")
    –ö–∞–∂–¥—ã–π Document —Å–æ–¥–µ—Ä–∂–∏—Ç metadata: {source: "books/file.pdf", page: 0}
    –í–ê–ñ–ù–û: source —Å–æ–¥–µ—Ä–∂–∏—Ç –ü–£–¢–¨, –Ω–µ –∏–º—è —Ñ–∞–π–ª–∞. –í UI –ø—Ä–∏–≤–æ–¥–∏–º –∫ basename.

split_documents(docs: list[Document], chunk_size: int, chunk_overlap: int) -> list[Document]
    –†–∞–∑–±–∏–≤–∞–µ—Ç –Ω–∞ —á–∞–Ω–∫–∏ —á–µ—Ä–µ–∑ RecursiveCharacterTextSplitter
    –°–æ—Ö—Ä–∞–Ω—è–µ—Ç metadata –∏–∑ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞

save_chunks_for_debug(chunks: list[Document], path: str)
    –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —á–∞–Ω–∫–∏ –≤ JSONL –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ DEBUG_DUMP_CHUNKS=1)
    –§–æ—Ä–º–∞—Ç: {"text": "...", "source": "file.pdf", "page": 5, "chunk_id": 0}

save_index_config(index_dir: str, chunk_size: int, chunk_overlap: int, embed_model: str, pdf_files: list[str], chunk_count: int)
    –°–æ—Ö—Ä–∞–Ω—è–µ—Ç config.json —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —Å–±–æ—Ä–∫–∏ –∏–Ω–¥–µ–∫—Å–∞:
    - chunk_size, chunk_overlap, embed_model
    - built_at (ISO datetime —Å–±–æ—Ä–∫–∏)
    - pdf_count (–∫–æ–ª-–≤–æ PDF)
    - pdf_files (—Å–ø–∏—Å–æ–∫ –∏–º—ë–Ω —Ñ–∞–π–ª–æ–≤)
    - chunk_count (–∫–æ–ª-–≤–æ —á–∞–Ω–∫–æ–≤)

build_index(chunks: list[Document], index_dir: str, embed_model: str)
    –°–æ–∑–¥–∞—ë—Ç embeddings –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç FAISS –∏–Ω–¥–µ–∫—Å
    –í–ê–ñ–ù–û: HuggingFaceEmbeddings –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∏–∑ langchain_huggingface

rebuild_full_index(books_dir: str, index_dir: str) -> bool
    –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è: –≤—ã–∑—ã–≤–∞–µ—Ç –≤—Å–µ –≤—ã—à–µ–ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–µ
    –ß–∏—Ç–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ env (CHUNK_SIZE, CHUNK_OVERLAP)
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç True –µ—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ, False –µ—Å–ª–∏ –Ω–µ—Ç PDF
```

### 4.2 `app.py`

–û—Ç–≤–µ—á–∞–µ—Ç –∑–∞: UI, –∑–∞–≥—Ä—É–∑–∫–∞ –∏–Ω–¥–µ–∫—Å–∞, —á–∞—Ç —Å –∏—Å—Ç–æ—Ä–∏–µ–π.

```
–§–£–ù–ö–¶–ò–ò:

load_index(index_dir: str, config: dict) -> FAISS | None
    –ó–∞–≥—Ä—É–∂–∞–µ—Ç FAISS –∏–Ω–¥–µ–∫—Å —Å –¥–∏—Å–∫–∞.
    –í–ê–ñ–ù–û: Embeddings —Å–æ–∑–¥–∞—é—Ç—Å—è –ó–î–ï–°–¨ –û–î–ò–ù –†–ê–ó –∏–∑ config["embed_model"].
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç @st.cache_resource –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞ –ò embeddings.
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç None –µ—Å–ª–∏ –∏–Ω–¥–µ–∫—Å–∞ –Ω–µ—Ç.

load_index_config(index_dir: str) -> dict | None
    –ó–∞–≥—Ä—É–∂–∞–µ—Ç config.json —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —Å–±–æ—Ä–∫–∏.
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: {
        "chunk_size": int, "chunk_overlap": int, "embed_model": str,
        "built_at": str, "pdf_count": int, "pdf_files": list, "chunk_count": int
    }
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç None –µ—Å–ª–∏ —Ñ–∞–π–ª–∞ –Ω–µ—Ç.

get_embeddings(config: dict) -> HuggingFaceEmbeddings
    –°–æ–∑–¥–∞—ë—Ç embeddings –∏—Å–ø–æ–ª—å–∑—É—è embed_model –ò–ó CONFIG (–Ω–µ –∏–∑ env!).
    –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ò–ó load_index(), –Ω–µ –∏–∑ ask_question().
    –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –∏ –ø—Ä–∏ query.

check_embed_model_mismatch(config: dict) -> bool
    –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç config["embed_model"] —Å os.getenv("EMBED_MODEL").
    –ï—Å–ª–∏ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç True (–ø–æ–∫–∞–∑–∞—Ç—å warning).

get_llm() -> OllamaLLM
    –°–æ–∑–¥–∞—ë—Ç LLM –∏–∑ Ollama
    –ú–æ–¥–µ–ª—å –±–µ—Ä—ë—Ç—Å—è –∏–∑ os.getenv("OLLAMA_MODEL", "llama3")

check_ollama_connection(llm: OllamaLLM) -> bool
    –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Ollama –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º.
    try:
        llm.invoke("test")
        return True
    except:
        return False
    
    –í main() –µ—Å–ª–∏ False:
        st.error("‚ùå Ollama –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: ollama serve")
        st.stop()

build_history_text(messages: list[dict], max_pairs: int = 3) -> str
    –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç UI-–∏—Å—Ç–æ—Ä–∏—é –≤ —Ç–µ–∫—Å—Ç –¥–ª—è –ø—Ä–æ–º–ø—Ç–∞.
    –§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞:
        "–í–æ–ø—Ä–æ—Å: ...
        –û—Ç–≤–µ—Ç: ...
        
        –í–æ–ø—Ä–æ—Å: ...
        –û—Ç–≤–µ—Ç: ..."
    –ë–µ—Ä—ë—Ç —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ max_pairs –ø–∞—Ä (user, assistant).
    –ï—Å–ª–∏ –∏—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞ ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É.

get_retriever(vectorstore: FAISS, top_k: int) -> VectorStoreRetriever
    –°–æ–∑–¥–∞—ë—Ç retriever —Å –∑–∞–¥–∞–Ω–Ω—ã–º k:
    return vectorstore.as_retriever(search_kwargs={"k": top_k})
    
    –í–ê–ñ–ù–û: k –∑–∞–¥–∞—ë—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ retriever, –ù–ï –ø—Ä–∏ –≤—ã–∑–æ–≤–µ.

ask_question(retriever, llm, question: str, messages: list[dict]) -> tuple[str, list[Document]]
    1. history_text = build_history_text(messages)
    2. full_question = f"–ü—Ä–µ–¥—ã–¥—É—â–∏–π –¥–∏–∞–ª–æ–≥:\n{history_text}\n\n–¢–µ–∫—É—â–∏–π –≤–æ–ø—Ä–æ—Å: {question}"
       (–∏–ª–∏ –ø—Ä–æ—Å—Ç–æ question –µ—Å–ª–∏ –∏—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞)
    3. docs = retriever.invoke(full_question)  # –û–°–ù–û–í–ù–û–ô –º–µ—Ç–æ–¥
       –û–∂–∏–¥–∞–µ–º: list[Document].
       Fallback: get_relevant_documents() –¢–û–õ–¨–ö–û –µ—Å–ª–∏ invoke –≤–µ—Ä–Ω—É–ª –Ω–µ list.
    4. –ï—Å–ª–∏ not docs: return "–í –∫–Ω–∏–≥–∞—Ö –Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏...", []  # –ë–ï–ó –≤—ã–∑–æ–≤–∞ LLM
    5. –°–æ–±—Ä–∞—Ç—å context:
       context = "\n\n---\n\n".join(doc.page_content for doc in docs)
    6. –°–æ–±—Ä–∞—Ç—å prompt = SYSTEM_PROMPT.format(context=context, question=full_question)
    7. answer = llm.invoke(prompt)
    8. return (answer, docs)
    
    –í–ê–ñ–ù–û: –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º RetrievalQA chain. –ù–µ —Å–æ–∑–¥–∞—ë–º embeddings –∑–¥–µ—Å—å.

format_source(doc: Document) -> str
    –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫ –≤ –ï–î–ò–ù–´–ô —Ñ–æ—Ä–º–∞—Ç: "book.pdf [—Å—Ç—Ä. 23]"
    1. filename = os.path.basename(doc.metadata.get("source", "unknown"))
    2. page = doc.metadata.get("page_label") –∏–ª–∏ str(doc.metadata.get("page", 0) + 1)
    3. return f"{filename} [—Å—Ç—Ä. {page}]"

format_sources(source_documents: list[Document]) -> list[str]
    –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –∏ –¥–µ–¥—É–ø–ª–∏—Ü–∏—Ä—É–µ—Ç —Å–ø–∏—Å–æ–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

main()
    Streamlit UI:
    - –ó–∞–≥–æ–ª–æ–≤–æ–∫
    - Sidebar —Å –∫–Ω–æ–ø–∫–∞–º–∏ Clear chat / Rebuild index + —Å—Ç–∞—Ç—É—Å –∏–Ω–¥–µ–∫—Å–∞
    - –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π (st.session_state.messages)
    - –ü–æ–ª–µ –≤–≤–æ–¥–∞
    - –í—ã–≤–æ–¥ –æ—Ç–≤–µ—Ç–∞ + –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
    
    –í–ê–ñ–ù–û: –ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è Rebuild index:
    1. success = rebuild_full_index()
    2. –ï—Å–ª–∏ success:
       - st.cache_resource.clear()
       - st.rerun()
    3. –ï—Å–ª–∏ –Ω–µ success (–Ω–µ—Ç PDF):
       - –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É, –ù–ï –¥–µ–ª–∞–µ–º rerun
```

### 4.3 `requirements.txt`

```
streamlit
langchain
langchain-community
langchain-ollama
langchain-huggingface
faiss-cpu
pypdf
sentence-transformers
```

### 4.4 `.gitignore`

```
rag_index/
chunks.jsonl
*.pyc
__pycache__/
.env
.venv/
.streamlit/
.DS_Store
```

**‚ö†Ô∏è –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–ï:** `chunks.jsonl` –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –∫–Ω–∏–≥. –ù–µ –∫–æ–º–º–∏—Ç–∏—Ç—å –∏ –Ω–µ –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å ‚Äî —Ä–∏—Å–∫ –Ω–∞—Ä—É—à–µ–Ω–∏—è –∫–æ–ø–∏—Ä–∞–π—Ç–∞.

---

## 5. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (—á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è)

| –ü–∞—Ä–∞–º–µ—Ç—Ä | Env –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è | Default | –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |
|----------|----------------|---------|------------------|
| –†–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞ | `CHUNK_SIZE` | 1000 | rag_setup.py |
| –ü–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ —á–∞–Ω–∫–æ–≤ | `CHUNK_OVERLAP` | 200 | rag_setup.py |
| –ö–æ–ª-–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ | `TOP_K` | 4 | app.py |
| –ú–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ | `EMBED_MODEL` | `sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2` | rag_setup.py (–ø—Ä–∏ —Å–±–æ—Ä–∫–µ) |
| –ú–æ–¥–µ–ª—å Ollama | `OLLAMA_MODEL` | `llama3` | app.py |
| –î–∞–º–ø —á–∞–Ω–∫–æ–≤ | `DEBUG_DUMP_CHUNKS` | `0` | rag_setup.py |
| –ü–∞–ø–∫–∞ —Å PDF | `BOOKS_DIR` | `books/` | –æ–±–∞ —Ñ–∞–π–ª–∞ |
| –ü–∞–ø–∫–∞ –∏–Ω–¥–µ–∫—Å–∞ | `INDEX_DIR` | `rag_index/` | –æ–±–∞ —Ñ–∞–π–ª–∞ |

**–ö–†–ò–¢–ò–ß–ù–û:** –ü—Ä–∏ —Å–±–æ—Ä–∫–µ –∏–Ω–¥–µ–∫—Å–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `{INDEX_DIR}/config.json`. 

**–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω–¥–µ–∫—Å–∞ –≤ app.py:**
- –ß–∏—Ç–∞–µ–º `embed_model` –∏–∑ `{INDEX_DIR}/config.json` (–ù–ï –∏–∑ env!)
- –ò—Å–ø–æ–ª—å–∑—É–µ–º —ç—Ç—É –º–æ–¥–µ–ª—å –¥–ª—è `HuggingFaceEmbeddings` –ø—Ä–∏ `FAISS.load_local()`
- –ï—Å–ª–∏ env `EMBED_MODEL` –∑–∞–¥–∞–Ω –∏ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç `config.json` ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ–º warning

–≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ embeddings –ø—Ä–∏ query —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å embeddings –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –∏–Ω–¥–µ–∫—Å–∞.

---

## 6. –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç (–∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–∞)

**–í–ê–ñ–ù–û:** –ú—ã –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ–º RetrievalQA chain. –ü—Ä–æ–º–ø—Ç —Å–æ–±–∏—Ä–∞–µ–º –∫–∞–∫ f-string –≤ ask_question().
–ò—Å—Ç–æ—Ä–∏—è –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ `full_question`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ {question}.

```
–¢—ã ‚Äî –ø–æ–º–æ—â–Ω–∏–∫, –æ—Ç–≤–µ—á–∞—é—â–∏–π –¢–û–õ–¨–ö–û –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏–∑ –∫–Ω–∏–≥.

–ü–†–ê–í–ò–õ–ê:
1. –û—Ç–≤–µ—á–∞–π –¢–û–õ–¨–ö–û –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –Ω–∏–∂–µ.
2. –ï—Å–ª–∏ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –ù–ï–¢ –æ—Ç–≤–µ—Ç–∞ ‚Äî –æ—Ç–≤–µ—á–∞–π: "–í –∫–Ω–∏–≥–∞—Ö –Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ —ç—Ç–æ–º—É –≤–æ–ø—Ä–æ—Å—É."
3. –ù–ï –ø—Ä–∏–¥—É–º—ã–≤–∞–π —Ñ–∞–∫—Ç—ã. –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π –≤–Ω–µ—à–Ω–∏–µ –∑–Ω–∞–Ω–∏—è.
4. –ù–ï –¥–æ–±–∞–≤–ª—è–π –∏—Å—Ç–æ—á–Ω–∏–∫–∏/—Å—Å—ã–ª–∫–∏/—Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ —Ç–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞. –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –±—É–¥—É—Ç –ø–æ–∫–∞–∑–∞–Ω—ã –æ—Ç–¥–µ–ª—å–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
5. –ù–ï –ø—Ä–∏–¥—É–º—ã–≤–∞–π –Ω–æ–º–µ—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤.

–ö–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ –∫–Ω–∏–≥:
{context}

–í–æ–ø—Ä–æ—Å: {question}

–û—Ç–≤–µ—Ç:
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—è:** –í `ask_question()` —Ñ–æ—Ä–º–∏—Ä—É–µ–º `full_question`:
```
–ü—Ä–µ–¥—ã–¥—É—â–∏–π –¥–∏–∞–ª–æ–≥:
–í–æ–ø—Ä–æ—Å: ...
–û—Ç–≤–µ—Ç: ...

–¢–µ–∫—É—â–∏–π –≤–æ–ø—Ä–æ—Å: <user_question>
```
–≠—Ç–æ—Ç `full_question` –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ `{question}` –≤ –ø—Ä–æ–º–ø—Ç–µ.

### –ó–∞—â–∏—Ç–∞ –æ—Ç –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–π (–≤—Å—Ç—Ä–æ–µ–Ω–∞ –≤ ask_question):

```python
# –°–ù–ê–ß–ê–õ–ê retrieval, –ü–û–¢–û–ú –ø—Ä–æ–≤–µ—Ä–∫–∞:
docs = retriever.invoke(full_question)
if not docs:
    return "–í –∫–Ω–∏–≥–∞—Ö –Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ —ç—Ç–æ–º—É –≤–æ–ø—Ä–æ—Å—É.", []
# LLM –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¢–û–õ–¨–ö–û –µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã
```

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:** –ï—Å–ª–∏ retriever –≤–µ—Ä–Ω—É–ª —á–∞–Ω–∫–∏, –Ω–æ –æ–Ω–∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –æ—Ç–≤–µ—Ç–∞ ‚Äî –º–æ–¥–µ–ª—å –æ–±—è–∑–∞–Ω–∞ —Å–ª–µ–¥–æ–≤–∞—Ç—å –ø—Ä–æ–º–ø—Ç—É –∏ —Å–∫–∞–∑–∞—Ç—å "–Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏", –∞ –Ω–µ —Ñ–∞–Ω—Ç–∞–∑–∏—Ä–æ–≤–∞—Ç—å. –≠—Ç–æ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –Ω–∞ 100%, –Ω–æ –ø—Ä–æ–º–ø—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∂—ë—Å—Ç–∫–∏–π.

---

## 7. UI (Streamlit)

### –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üìö RAG —á–∞—Ç–±–æ—Ç –ø–æ PDF                                    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                          ‚îÇ
‚îÇ  [–°–∏–¥–µ–±–∞—Ä]              ‚îÇ  üí¨ –ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞               ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ             ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ             ‚îÇ
‚îÇ  üóëÔ∏è Clear chat          ‚îÇ  User: –ö—Ç–æ –∞–≤—Ç–æ—Ä –∫–Ω–∏–≥–∏?        ‚îÇ
‚îÇ  üîÑ Rebuild index       ‚îÇ  Bot: –î–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π...           ‚îÇ
‚îÇ                         ‚îÇ       Sources:                 ‚îÇ
‚îÇ  üìä –°—Ç–∞—Ç—É—Å:             ‚îÇ       ‚Ä¢ book.pdf [—Å—Ç—Ä. 1]      ‚îÇ
‚îÇ  –ò–Ω–¥–µ–∫—Å –∑–∞–≥—Ä—É–∂–µ–Ω ‚úÖ     ‚îÇ                                ‚îÇ
‚îÇ  PDF: 3                 ‚îÇ  User: –ö–æ–≥–¥–∞ –æ–Ω —Ä–æ–¥–∏–ª—Å—è?       ‚îÇ
‚îÇ  –ß–∞–Ω–∫–æ–≤: 234            ‚îÇ  Bot: –í 1821 –≥–æ–¥—É...           ‚îÇ
‚îÇ  chunk_size: 1000       ‚îÇ       Sources:                 ‚îÇ
‚îÇ  overlap: 200           ‚îÇ       ‚Ä¢ book.pdf [—Å—Ç—Ä. 5]      ‚îÇ
‚îÇ                         ‚îÇ                                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  [–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –ø–æ –∫–Ω–∏–≥–∞–º...]                    [Send] ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –°–æ—Å—Ç–æ—è–Ω–∏—è:
1. **–ù–µ—Ç –∏–Ω–¥–µ–∫—Å–∞** ‚Üí "–ò–Ω–¥–µ–∫—Å –Ω–µ –Ω–∞–π–¥–µ–Ω. –ü–æ–ª–æ–∂–∏—Ç–µ PDF –≤ books/ –∏ –Ω–∞–∂–º–∏—Ç–µ Rebuild index"
2. **–ù–µ—Ç PDF** ‚Üí "–ü–∞–ø–∫–∞ books/ –ø—É—Å—Ç–∞. –î–æ–±–∞–≤—å—Ç–µ PDF —Ñ–∞–π–ª—ã."
3. **–ò–Ω–¥–µ–∫—Å –µ—Å—Ç—å** ‚Üí –ß–∞—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤ sidebar –ø–æ–∫–∞–∑–∞–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–±–æ—Ä–∫–∏

---

## 8. –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –í–ù–ï –∫–æ–¥–∞

### 8.1 –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Ollama (–æ–¥–∏–Ω —Ä–∞–∑)

```bash
# –í Codespaces –∏–ª–∏ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ:
curl -fsSL https://ollama.com/install.sh | sh

# –°–∫–∞—á–∞—Ç—å –º–æ–¥–µ–ª—å (–≤—ã–±–µ—Ä–∏ –æ–¥–Ω—É):
ollama pull llama3          # ~4GB, —Ö–æ—Ä–æ—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ
ollama pull llama3:8b       # —Ç–æ –∂–µ
ollama pull mistral         # ~4GB, –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞
ollama pull phi3            # ~2GB, –ª–µ–≥—á–µ –¥–ª—è —Å–ª–∞–±—ã—Ö –º–∞—à–∏–Ω
```

**–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–µ –Ω—É–∂–Ω–∞.** Ollama –ø–æ–ª–Ω–æ—Å—Ç—å—é –ª–æ–∫–∞–ª—å–Ω–∞—è.

### 8.2 –ü–æ–ª–æ–∂–∏—Ç—å PDF –≤ books/

–ü—Ä–æ—Å—Ç–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã. –ù–∏–∫–∞–∫–∏—Ö —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π.

### 8.3 (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –ú–æ–¥–µ–ª—å Ollama
export OLLAMA_MODEL=mistral

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —á–∞–Ω–∫–∏–Ω–≥–∞ (—Ç—Ä–µ–±—É–µ—Ç Rebuild –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è)
export CHUNK_SIZE=1000
export CHUNK_OVERLAP=200

# –ö–æ–ª-–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ retrieval
export TOP_K=4

# –í–∫–ª—é—á–∏—Ç—å –¥–∞–º–ø —á–∞–Ω–∫–æ–≤ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
export DEBUG_DUMP_CHUNKS=1
```

---

## 9. Roadmap —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**–û–±—â–µ–µ –≤—Ä–µ–º—è:** ~5-7 —á–∞—Å–æ–≤ (–ø–æ–ª–¥–Ω—è –Ω–∞ –ø–µ—Ä–≤—ã–π —Ä–∞–±–æ—á–∏–π –≤–∞—Ä–∏–∞–Ω—Ç)

### –≠—Ç–∞–ø 1: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (15 –º–∏–Ω)
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `AntiOverengineering_RULES.md`
- [ ] –°–æ–∑–¥–∞—Ç—å `.gitignore`
- [ ] –°–æ–∑–¥–∞—Ç—å `books/.gitkeep`
- [ ] –°–æ–∑–¥–∞—Ç—å `requirements.txt`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `README.md`

### –≠—Ç–∞–ø 2: –°–±–æ—Ä–∫–∞ –∏–Ω–¥–µ–∫—Å–∞ (1.5-2 —á–∞—Å–∞)
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å `rag_setup.py`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ config.json
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ 1 PDF
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ `chunks.jsonl` —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø—Ä–∏ DEBUG_DUMP_CHUNKS=1

### –≠—Ç–∞–ø 3: –ß–∞—Ç UI (2-3 —á–∞—Å–∞)
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å `app.py`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å retriever + llm —Å –∂—ë—Å—Ç–∫–∏–º –ø—Ä–æ–º–ø—Ç–æ–º
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ä—É—á–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é –≤ –ø—Ä–æ–º–ø—Ç (build_history_text)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏ sidebar + –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ config
- [ ] –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (basename + page_label)

### –≠—Ç–∞–ø 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (1-2 —á–∞—Å–∞)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–Ω–µ—Ç –∏–Ω–¥–µ–∫—Å–∞ / –Ω–µ—Ç PDF / –≤—Å—ë –æ–∫)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å citations (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã?)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é (–ø–æ–Ω–∏–º–∞–µ—Ç "–æ–Ω", "—ç—Ç–æ—Ç" –∏ —Ç.–¥.?)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å "–Ω–µ—Ç –æ—Ç–≤–µ—Ç–∞ –≤ –∫–Ω–∏–≥–∞—Ö" (DoD #5)

### –≠—Ç–∞–ø 5: –û—Ç–ª–∞–¥–∫–∞ —á–∞–Ω–∫–æ–≤ (–ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
- [ ] –¢—ã —Ç–µ—Å—Ç–∏—Ä—É–µ—à—å, –¥–∞—ë—à—å —Ñ–∏–¥–±–µ–∫
- [ ] –í–∫–ª—é—á–∞–µ–º DEBUG_DUMP_CHUNKS=1, —Å–º–æ—Ç—Ä–∏–º `chunks.jsonl`
- [ ] –ü—Ä–∞–≤–∏–º CHUNK_SIZE/CHUNK_OVERLAP —á–µ—Ä–µ–∑ env
- [ ] Rebuild

---

## 10. Definition of Done (–∫–æ–≥–¥–∞ —Å—á–∏—Ç–∞–µ–º –≥–æ—Ç–æ–≤—ã–º)

| # | –ö—Ä–∏—Ç–µ—Ä–∏–π | –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å |
|---|----------|---------------|
| 1 | –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–µ–∑ –∏–Ω–¥–µ–∫—Å–∞ ‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ + –∫–Ω–æ–ø–∫–∞ Rebuild | –£–¥–∞–ª–∏—Ç—å `rag_index/`, –∑–∞–ø—É—Å—Ç–∏—Ç—å `streamlit run app.py` |
| 2 | Rebuild —Å–æ–∑–¥–∞—ë—Ç –∏–Ω–¥–µ–∫—Å + config.json | –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª—ã –≤ `rag_index/` |
| 3 | DEBUG_DUMP_CHUNKS=1 —Å–æ–∑–¥–∞—ë—Ç chunks.jsonl | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å env, Rebuild, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª |
| 4 | –û—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å –ø–æ –∫–Ω–∏–≥–µ + sources | –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É PDF |
| 5 | –ò—Å—Ç–æ—Ä–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç (–ù–ï –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–µ–ª–∏–∑) | –ò—Å—Ç–æ—Ä–∏—è –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –∑–∞–ø—Ä–æ—Å; –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ—Ä–µ—Ñ–µ—Ä–µ–Ω—Å–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –º–æ–¥–µ–ª–∏ |
| 6 | –ù–∞ –≤–æ–ø—Ä–æ—Å –Ω–µ –ø–æ –∫–Ω–∏–≥–µ ‚Äî "–Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏" | –°–ø—Ä–æ—Å–∏—Ç—å —á—Ç–æ-—Ç–æ, —á–µ–≥–æ –Ω–µ—Ç –≤ PDF |
| 7 | Sources –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç basename + —Å—Ç—Ä–∞–Ω–∏—Ü—É | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç "book.pdf [—Å—Ç—Ä. 5]" |
| 8 | Sidebar –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–±–æ—Ä–∫–∏ | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ chunk_size/overlap |
| 9 | –†–∞–±–æ—Ç–∞–µ—Ç –≤ Codespaces –Ω–∞ –ø–æ—Ä—Ç—É 8501 | –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ |

---

## 11. –†–∏—Å–∫–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

| –†–∏—Å–∫ | –ú–∏—Ç–∏–≥–∞—Ü–∏—è |
|------|-----------|
| Ollama –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ | README —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π |
| Ollama –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞ | check_ollama_connection() + —Å–æ–æ–±—â–µ–Ω–∏–µ "ollama serve" |
| –ú–æ–¥–µ–ª—å –Ω–µ —Å–∫–∞—á–∞–Ω–∞ | –ß—ë—Ç–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ |
| PDF —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π ‚Äî –¥–æ–ª–≥–æ –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç—Å—è | –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä, –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ README |
| `allow_dangerous_deserialization` | –¢–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å, –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ–º —á—É–∂–∏–µ |
| Embeddings –¥–æ–ª–≥–æ —Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è –ø–µ—Ä–≤—ã–π —Ä–∞–∑ | –û–¥–∏–Ω —Ä–∞–∑ ~500MB, –ø–æ—Ç–æ–º –∫—ç—à |
| LLM "—Ñ–∞–Ω—Ç–∞–∑–∏—Ä—É–µ—Ç" | –ñ—ë—Å—Ç–∫–∏–π –ø—Ä–æ–º–ø—Ç + –ø—Ä–æ–≤–µ—Ä–∫–∞ docs –¥–æ LLM |
| –ò–∑–º–µ–Ω–∏–ª env –Ω–æ –∑–∞–±—ã–ª Rebuild | config.json –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ sidebar |
| Embed model –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç (build vs query) | app.py —á–∏—Ç–∞–µ—Ç –º–æ–¥–µ–ª—å –∏–∑ config.json, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç warning –µ—Å–ª–∏ env –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è |
| –ò—Å—Ç–æ—Ä–∏—è —Ä–∞–∑–¥—É–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ 3 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø–∞—Ä—ã Q&A |

---

## 12. –ö–ª—é—á–µ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è (–ø–æ—á–µ–º—É —Ç–∞–∫, –∞ –Ω–µ –∏–Ω–∞—á–µ)

| –†–µ—à–µ–Ω–∏–µ | –ü–æ—á–µ–º—É |
|---------|--------|
| retriever + llm –Ω–∞–ø—Ä—è–º—É—é (–Ω–µ RetrievalQA chain) | –ú–æ–∂–µ–º –ø—Ä–æ–≤–µ—Ä–∏—Ç—å docs –î–û LLM, –Ω–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å query/question –∫–ª—é—á–∞–º–∏ |
| –ü—Ä–æ–≤–µ—Ä–∫–∞ docs –¥–æ LLM | –≠–∫–æ–Ω–æ–º–∏–º –≤—Ä–µ–º—è, –∏—Å–∫–ª—é—á–∞–µ–º —Ñ–∞–Ω—Ç–∞–∑–∏–∏ –Ω–∞ –ø—É—Å—Ç—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö |
| –ò—Å—Ç–æ—Ä–∏—è –≤ –ø—Ä–æ–º–ø—Ç–µ –≤—Ä—É—á–Ω—É—é | –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ, –ª–µ–≥–∫–æ –¥–µ–±–∞–∂–∏—Ç—å |
| –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —á–µ—Ä–µ–∑ env | –ú–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å –±–µ–∑ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ |
| config.json –ø—Ä–∏ —Å–±–æ—Ä–∫–µ | –í–∏–¥–Ω–æ —Å –∫–∞–∫–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —Å–æ–±—Ä–∞–Ω –∏–Ω–¥–µ–∫—Å |
| chunks.jsonl –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ | –ù–µ —Ç–æ—Ä–º–æ–∑–∏—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –≤–∫–ª—é—á–∞–µ—Ç—Å—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ |
| basename –¥–ª—è sources | –ß–∏—Å—Ç—ã–π UI –±–µ–∑ –ø–æ–ª–Ω—ã—Ö –ø—É—Ç–µ–π |
| page_label —Å fallback –Ω–∞ page+1 | –†–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ PDF |
| Embed model –∏–∑ config.json –ø—Ä–∏ query | –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ embeddings –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –∏ –ø–æ–∏—Å–∫–µ |
| st.cache_resource.clear() –ø–æ—Å–ª–µ Rebuild | –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞ |
| –§–æ—Ä–º–∞—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ "—Å—Ç—Ä." –≤–µ–∑–¥–µ | –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ –≤ UI |

---

## 13. –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã

1. **PDF –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:** –ö–Ω–∏–≥–∞ –ø–æ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–º—É —É—á—ë—Ç—É (—Ä—É—Å—Å–∫–∏–π —Ç–µ–∫—Å—Ç, —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∞—è —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è)
2. **Ollama:** –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ
3. **–ú–æ–¥–µ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:** llama3


---

## 14. –ê–ù–ê–õ–ò–ó –ö–ê–ß–ï–°–¢–í–ê –û–¢–í–ï–¢–û–í ‚≠ê

### 14.1 –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∏–∞–ª–æ–≥–∏ —Å RAG (—Ä–µ–∞–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã)

–ù–∏–∂–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∏–∞–ª–æ–≥–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å RAG-—á–∞—Ç–±–æ—Ç–æ–º, –ø—Ä–æ–≤–µ–¥—ë–Ω–Ω—ã–µ –Ω–∞ –∫–Ω–∏–≥–µ "–ì–µ—Ä–∞—Å–∏–º–µ–Ω–∫–æ –ê. –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å –¥–ª—è —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–π" (440 —Å—Ç—Ä–∞–Ω–∏—Ü, 803 —á–∞–Ω–∫–∞).

---

#### –î–∏–∞–ª–æ–≥ 1: "–ö–∞–∫–∏–µ –≤–∏–¥—ã –∞–∫—Ç–∏–≤–æ–≤ –µ—Å—Ç—å?"

**–û—Ç–≤–µ—Ç RAG:**
> –í –∫–Ω–∏–≥–∞—Ö –µ—Å—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–∏–¥–∞—Ö –∞–∫—Ç–∏–≤–æ–≤. –í —á–∞—Å—Ç–Ω–æ—Å—Ç–∏, –≤ –≥–ª–∞–≤–µ 6 "–û–°–ù–û–í–ù–´–ï –°–†–ï–î–°–¢–í–ê" —Å–∫–∞–∑–∞–Ω–æ: ¬´–í —ç—Ç–æ–π –≥–ª–∞–≤–µ –≤—ã —Ç–∞–∫–∂–µ –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç–µ—Å—å —Å–æ —Å–ª–æ–∂–Ω—ã–º —Å–ª–æ–≤–æ–º ¬´–∞–º–æ—Ä—Ç–∏–∑–∞—Ü–∏—è¬ª...¬ª
> 
> –¢–∞–∫–∂–µ, –≤ –≥–ª–∞–≤–µ 9 "–û—Ç—á–µ—Ç –æ –¥–≤–∏–∂–µ–Ω–∏–∏ –¥–µ–Ω–µ–∂–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤" —Å–∫–∞–∑–∞–Ω–æ:
> ¬´–ê–∫—Ç–∏–≤—ã (assets) = –î–µ–Ω–µ–∂–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ (cash) + –û–±–æ—Ä–æ—Ç–Ω—ã–µ –∞–∫—Ç–∏–≤—ã (current assets) + –í–Ω–µ–æ–±–æ—Ä–æ—Ç–Ω—ã–µ –∞–∫—Ç–∏–≤—ã (non-current assets)¬ª
> 
> –í–∏–¥—ã –∞–∫—Ç–∏–≤–æ–≤:
> - –î–µ–Ω–µ–∂–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ (cash)
> - –û–±–æ—Ä–æ—Ç–Ω—ã–µ –∞–∫—Ç–∏–≤—ã (current assets): –¥–µ–±–∏—Ç–æ—Ä—Å–∫–∞—è –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å, —Ç–æ–≤–∞—Ä–Ω–æ-–º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω—ã–µ –∑–∞–ø–∞—Å—ã
> - –í–Ω–µ–æ–±–æ—Ä–æ—Ç–Ω—ã–µ –∞–∫—Ç–∏–≤—ã (non-current assets): –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞, –Ω–µ–º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω—ã–µ –∞–∫—Ç–∏–≤—ã

**–û—Ü–µ–Ω–∫–∞:** ‚≠ê‚≠ê‚≠ê‚≠ê‚òÜ (4/5)
- ‚úÖ –û—Ç–≤–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∏ –ø–æ–ª–Ω—ã–π
- ‚úÖ –ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã –æ—Å–Ω–æ–≤–Ω—ã–µ –≤–∏–¥—ã –∞–∫—Ç–∏–≤–æ–≤
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è –∏–∑ –∫–Ω–∏–≥–∏
- ‚ö†Ô∏è –¶–∏—Ç–∞—Ç–∞ –ø—Ä–æ –∞–º–æ—Ä—Ç–∏–∑–∞—Ü–∏—é –Ω–µ –æ—á–µ–Ω—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∞ –≤–æ–ø—Ä–æ—Å—É
- ‚ö†Ô∏è –ù–µ —É–∫–∞–∑–∞–Ω—ã —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ —Å–∞–º–æ–º –æ—Ç–≤–µ—Ç–µ (—Ç–æ–ª—å–∫–æ –≤ sources)

**–≠—Ç–∞–ª–æ–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑ –∫–Ω–∏–≥–∏ (chunk_id 85, 106):**
```
‚Ä¢ –¥–µ–Ω–µ–∂–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ (cash)
‚Ä¢ –¥–µ–±–∏—Ç–æ—Ä—Å–∫–∞—è –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å (accounts receivable)
‚Ä¢ –∑–∞–ø–∞—Å—ã –≥–æ—Ç–æ–≤–æ–π –ø—Ä–æ–¥—É–∫—Ü–∏–∏ –∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (inventory)
‚Ä¢ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ (fixed assets)
‚Ä¢ –Ω–µ–º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω—ã–µ –∞–∫—Ç–∏–≤—ã (intangible assets)

–û–±–æ—Ä–æ—Ç–Ω—ã–µ vs –≤–Ω–µ–æ–±–æ—Ä–æ—Ç–Ω—ã–µ:
‚Ä¢ current assets: –¥–µ–Ω–µ–∂–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞, —Ü–µ–Ω–Ω—ã–µ –±—É–º–∞–≥–∏, –¥–µ–±–∏—Ç–æ—Ä–∫–∞, –∑–∞–ø–∞—Å—ã
‚Ä¢ non-current assets: –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ
```

---

#### –î–∏–∞–ª–æ–≥ 2: "–ö–∞–∫–∏–µ –≤–∏–¥—ã –ø—Ä–∏–±—ã–ª–∏ –≤—ã–¥–µ–ª—è—é—Ç—Å—è –≤ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–º —É—á–µ—Ç–µ?"

**–û—Ç–≤–µ—Ç RAG:**
> –í –∫–Ω–∏–≥–∞—Ö –Ω–µ —É–∫–∞–∑–∞–Ω—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –≤–∏–¥—ã –ø—Ä–∏–±—ã–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–¥–µ–ª—è—é—Ç—Å—è –≤ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–º —É—á–µ—Ç–µ. –û–¥–Ω–∞–∫–æ, –≤ –æ—Ç—á–µ—Ç–µ –æ –ø—Ä–∏–±—ã–ª—è—Ö –∏ —É–±—ã—Ç–∫–∞—Ö (statement of income and expenses) –∫–æ–º–ø–∞–Ω–∏–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –≤–∏–¥—ã –ø—Ä–∏–±—ã–ª–∏:
> - –ü—Ä–∏–±—ã–ª—å –æ—Ç –ø—Ä–æ–¥–∞–∂–∏ —Ç–æ–≤–∞—Ä–æ–≤ –∏ —É—Å–ª—É–≥
> - –ü—Ä–∏–±—ã–ª—å –æ—Ç –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π
> - –ü—Ä–∏–±—ã–ª—å –æ—Ç –æ–ø–µ—Ä–∞—Ü–∏–π —Å —Ü–µ–Ω–Ω—ã–º–∏ –±—É–º–∞–≥–∞–º–∏
> - –ü—Ä–∏–±—ã–ª—å –æ—Ç –∞—Ä–µ–Ω–¥—ã –∏ –ª–∏–∑–∏–Ω–≥–∞
> –∏ —Ç.–¥.

**–û—Ü–µ–Ω–∫–∞:** ‚≠ê‚≠ê‚òÜ‚òÜ‚òÜ (2/5) ‚Äî –ü–†–û–ë–õ–ï–ú–ê!
- ‚ùå –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ "–Ω–µ —É–∫–∞–∑–∞–Ω—ã" ‚Äî –ù–ï–í–ï–†–ù–û! –í –∫–Ω–∏–≥–µ —á—ë—Ç–∫–æ –æ–ø–∏—Å–∞–Ω—ã –≤–∏–¥—ã –ø—Ä–∏–±—ã–ª–∏
- ‚ùå –ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–µ "–≤–∏–¥—ã –ø—Ä–∏–±—ã–ª–∏" –í–´–î–£–ú–ê–ù–´ –º–æ–¥–µ–ª—å—é (–≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏—è)
- ‚ùå Retriever –Ω–µ –Ω–∞—à—ë–ª —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —á–∞–Ω–∫–∏

**–≠—Ç–∞–ª–æ–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑ –∫–Ω–∏–≥–∏ (chunk_id 109, 120, 140):**
```
–û—Ç—á–µ—Ç –æ –ø—Ä–∏–±—ã–ª—è—Ö –∏ —É–±—ã—Ç–∫–∞—Ö —Å–æ–¥–µ—Ä–∂–∏—Ç:
‚Ä¢ –í—ã—Ä—É—á–∫–∞ (sales)
‚Ä¢ –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å (COGS)
‚Ä¢ –í–∞–ª–æ–≤–∞—è –ø—Ä–∏–±—ã–ª—å (gross profit) = –í—ã—Ä—É—á–∫–∞ - COGS
‚Ä¢ –ü—Ä–æ—á–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã (SG&A)
‚Ä¢ –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –ø—Ä–∏–±—ã–ª—å (operating profit)
‚Ä¢ –ü—Ä–∏–±—ã–ª—å –¥–æ –Ω–∞–ª–æ–≥–æ–æ–±–ª–æ–∂–µ–Ω–∏—è (profit before tax, PBT)
‚Ä¢ –ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å (net income, NI)

–¢–∞–∫–∂–µ —É–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è: EBITDA, EPS
```

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã:**
- –¢–µ—Ä–º–∏–Ω "–≤–∏–¥—ã –ø—Ä–∏–±—ã–ª–∏" –Ω–µ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è –¥–æ—Å–ª–æ–≤–Ω–æ –≤ –∫–Ω–∏–≥–µ
- Retriever –∏—Å–∫–∞–ª –ø–æ —Ç–æ—á–Ω–æ–º—É —Å–æ–≤–ø–∞–¥–µ–Ω–∏—é, –Ω–µ –Ω–∞—à—ë–ª —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏ –±–ª–∏–∑–∫–∏–µ —á–∞–Ω–∫–∏
- –ß–∞–Ω–∫–∏ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –≤–∞–ª–æ–≤–æ–π/—á–∏—Å—Ç–æ–π –ø—Ä–∏–±—ã–ª–∏ –Ω–µ –ø–æ–ø–∞–ª–∏ –≤ TOP_K

---

#### –î–∏–∞–ª–æ–≥ 3: "–ö–∞–∫–∏–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ–æ—Ä–º—ã —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ—Ç—á–µ—Ç–æ–≤ –≤—ã–¥–µ–ª—è—é—Ç—Å—è?"

**–û—Ç–≤–µ—Ç RAG:**
> (–¢–æ—Ç –∂–µ –æ—Ç–≤–µ—Ç –ø—Ä–æ –ø—Ä–∏–±—ã–ª—å ‚Äî –º–æ–¥–µ–ª—å –≤–µ—Ä–Ω—É–ª–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π/–ø–æ–≤—Ç–æ—Ä—ë–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç)

**–û—Ü–µ–Ω–∫–∞:** ‚≠ê‚òÜ‚òÜ‚òÜ‚òÜ (1/5) ‚Äî –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê
- ‚ùå –û—Ç–≤–µ—Ç –≤–æ–æ–±—â–µ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤–æ–ø—Ä–æ—Å—É
- ‚ùå –ü–æ—Ö–æ–∂–µ –Ω–∞ –ø—Ä–æ–±–ª–µ–º—É —Å –∏—Å—Ç–æ—Ä–∏–µ–π —á–∞—Ç–∞ (context pollution)

**–≠—Ç–∞–ª–æ–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑ –∫–Ω–∏–≥–∏ (chunk_id 103):**
```
–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å ‚Äî —ç—Ç–æ:
‚Ä¢ –±–∞–ª–∞–Ω—Å (balance sheet)
‚Ä¢ –æ—Ç—á–µ—Ç –æ –ø—Ä–∏–±—ã–ª—è—Ö –∏ —É–±—ã—Ç–∫–∞—Ö (income statement, P&L)
‚Ä¢ –æ—Ç—á–µ—Ç –æ –¥–≤–∏–∂–µ–Ω–∏–∏ –¥–µ–Ω–µ–∂–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ (cash flow statement)
‚Ä¢ –æ—Ç—á–µ—Ç –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–º –∫–∞–ø–∏—Ç–∞–ª–µ (statement of shareholders equity)
‚Ä¢ –ø–æ—è—Å–Ω–µ–Ω–∏—è –∫–æ –≤—Å–µ–º —ç—Ç–∏–º –æ—Ç—á–µ—Ç–∞–º
```

---

#### –î–∏–∞–ª–æ–≥ 4: "–∫–∞–∫–∏–µ —Ñ–æ—Ä–º—ã —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ—Ç—á–µ—Ç–æ–≤ —Å—É—â–µ—Å—Ç–≤—É—é—Ç?" (–ø–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞)

**–û—Ç–≤–µ—Ç RAG (–Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º!):**
> According to the provided context, there are several forms of financial reports...

**–û—Ü–µ–Ω–∫–∞:** ‚≠ê‚≠ê‚≠ê‚òÜ‚òÜ (3/5)
- ‚úÖ –û—Ç–≤–µ—Ç –ø–æ —Å—É—Ç–∏ –≤–µ—Ä–Ω—ã–π
- ‚úÖ –ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã –≤—Å–µ 4 –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ–æ—Ä–º—ã
- ‚ùå –û—Ç–≤–µ—Ç –Ω–∞ –ê–ù–ì–õ–ò–ô–°–ö–û–ú —è–∑—ã–∫–µ –ø—Ä–∏ —Ä—É—Å—Å–∫–æ–º –≤–æ–ø—Ä–æ—Å–µ
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ–º–ø—Ç "–ø–µ—Ä–µ–≤–µ–¥–∏ –Ω–∞ —Ä—É—Å—Å–∫–∏–π"

---

### 14.2 –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∫–∞—á–µ—Å—Ç–≤–∞

| –í–æ–ø—Ä–æ—Å | –¢–æ—á–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞ | –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å retrieval | –Ø–∑—ã–∫ | –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ |
|--------|-----------------|------------------------|------|--------------|
| –í–∏–¥—ã –∞–∫—Ç–∏–≤–æ–≤ | ‚úÖ –í–µ—Ä–Ω–æ | ‚úÖ –•–æ—Ä–æ—à–æ | RU | 4/5 |
| –í–∏–¥—ã –ø—Ä–∏–±—ã–ª–∏ | ‚ùå –ì–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏—è | ‚ùå –ü–ª–æ—Ö–æ | RU | 2/5 |
| –§–æ—Ä–º—ã –æ—Ç—á–µ—Ç–æ–≤ (1) | ‚ùå –ù–µ —Ç–æ—Ç –æ—Ç–≤–µ—Ç | ‚ùå –ü–ª–æ—Ö–æ | RU | 1/5 |
| –§–æ—Ä–º—ã –æ—Ç—á–µ—Ç–æ–≤ (2) | ‚úÖ –í–µ—Ä–Ω–æ | ‚úÖ –•–æ—Ä–æ—à–æ | EN‚ùå | 3/5 |
| –ü–µ—Ä–µ–≤–æ–¥ | ‚úÖ –í–µ—Ä–Ω–æ | N/A | RU | 4/5 |

**–°—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞: 2.8/5** ‚Äî –¢—Ä–µ–±—É–µ—Ç—Å—è —É–ª—É—á—à–µ–Ω–∏–µ!

---

### 14.3 –ù–µ–∑–∞–≤–∏—Å–∏–º–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (–∞–Ω–∞–ª–∏–∑ chunks.jsonl)

–ü—Ä–æ–≤–µ–¥—ë–Ω –∞–Ω–∞–ª–∏–∑ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–∞ retrieval:

**–ü–æ–∏—Å–∫ –ø–æ "–≤–∏–¥—ã –ø—Ä–∏–±—ã–ª–∏":**
- –ù–∞–π–¥–µ–Ω–æ —á–∞–Ω–∫–æ–≤ —Å —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ–º –≤–∏–¥–æ–≤ –ø—Ä–∏–±—ã–ª–∏: 15+
- –°–∞–º—ã–π —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π: chunk_id 109 (—Å—Ç—Ä. 45) ‚Äî –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ P&L —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

**–ü–æ–∏—Å–∫ –ø–æ "—Ñ–æ—Ä–º—ã —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ—Ç—á–µ—Ç–æ–≤":**
- –ù–∞–π–¥–µ–Ω–æ: chunk_id 103 (—Å—Ç—Ä. 42) ‚Äî —Ç–æ—á–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ñ–æ—Ä–º –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç–∏
- –¶–∏—Ç–∞—Ç–∞: "–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å ‚Äî —ç—Ç–æ: –±–∞–ª–∞–Ω—Å, –æ—Ç—á–µ—Ç –æ –ø—Ä–∏–±—ã–ª—è—Ö –∏ —É–±—ã—Ç–∫–∞—Ö..."

**–í—ã–≤–æ–¥:** –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ï–°–¢–¨ –≤ –∏–Ω–¥–µ–∫—Å–µ, –Ω–æ retriever –µ—ë –ù–ï –Ω–∞—Ö–æ–¥–∏—Ç!

---

## 15. –í–´–Ø–í–õ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ –ò –£–ó–ö–ò–ï –ú–ï–°–¢–ê ‚≠ê

### 15.1 –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (–±–ª–æ–∫–∏—Ä—É—é—Ç –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)

| # | –ü—Ä–æ–±–ª–µ–º–∞ | –°–∏–º–ø—Ç–æ–º | –ü—Ä–∏—á–∏–Ω–∞ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|---|----------|---------|---------|-----------|
| P1 | **–°–ª–∞–±—ã–π semantic search** | –ù–µ –Ω–∞—Ö–æ–¥–∏—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —á–∞–Ω–∫–∏ –¥–∞–∂–µ –∫–æ–≥–¥–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –µ—Å—Ç—å | Embedding –º–æ–¥–µ–ª—å MiniLM-L12 —Å–ª–∞–±–æ –ø–æ–Ω–∏–º–∞–µ—Ç —Å–∏–Ω–æ–Ω–∏–º—ã –∏ –ø–µ—Ä–µ—Ñ—Ä–∞–∑–∏—Ä–æ–≤–∫–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º | üî¥ CRITICAL |
| P2 | **–ì–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–∏ –ø—Ä–∏ –ø—É—Å—Ç–æ–º retrieval** | –ú–æ–¥–µ–ª—å –≤—ã–¥—É–º—ã–≤–∞–µ—Ç —Ñ–∞–∫—Ç—ã –≤–º–µ—Å—Ç–æ "–Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏" | Retriever –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —á–∞–Ω–∫–∏, –º–æ–¥–µ–ª—å –ø—ã—Ç–∞–µ—Ç—Å—è "—É–≥–æ–¥–∏—Ç—å" | üî¥ CRITICAL |
| P3 | **–°–º–µ–Ω–∞ —è–∑—ã–∫–∞ –æ—Ç–≤–µ—Ç–∞** | –û—Ç–≤–µ—Ç –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º –ø—Ä–∏ —Ä—É—Å—Å–∫–æ–º –≤–æ–ø—Ä–æ—Å–µ | LLM llama3 –æ–±—É—á–µ–Ω–∞ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º | üü† HIGH |

### 15.2 –°–µ—Ä—å—ë–∑–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (—Å–Ω–∏–∂–∞—é—Ç –∫–∞—á–µ—Å—Ç–≤–æ)

| # | –ü—Ä–æ–±–ª–µ–º–∞ | –°–∏–º–ø—Ç–æ–º | –ü—Ä–∏—á–∏–Ω–∞ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|---|----------|---------|---------|-----------|
| P4 | **Chunking —Ä–∞–∑—Ä—ã–≤–∞–µ—Ç —Å–ø–∏—Å–∫–∏** | –ß–∞—Å—Ç–∏ –æ–¥–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ –≤ —Ä–∞–∑–Ω—ã—Ö —á–∞–Ω–∫–∞—Ö | RecursiveCharacterTextSplitter –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–æ–∫—É–º–µ–Ω—Ç–∞ | üü† HIGH |
| P5 | **–ù–µ—Ç reranking** | –í TOP_K –ø–æ–ø–∞–¥–∞—é—Ç –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —á–∞–Ω–∫–∏ | –¢–æ–ª—å–∫–æ vector similarity, –±–µ–∑ –ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä–∫–∏ | üü° MEDIUM |
| P6 | **–ò—Å—Ç–æ—Ä–∏—è –∑–∞–≥—Ä—è–∑–Ω—è–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç** | –û—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å N+1 —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ—Ç –≤–æ–ø—Ä–æ—Å–∞ N | –ò—Å—Ç–æ—Ä–∏—è –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ query –¥–ª—è retriever | üü° MEDIUM |

### 15.3 –ú–∏–Ω–æ—Ä–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (—É–ª—É—á—à–µ–Ω–∏—è UX)

| # | –ü—Ä–æ–±–ª–µ–º–∞ | –°–∏–º–ø—Ç–æ–º | –ü—Ä–∏—á–∏–Ω–∞ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|---|----------|---------|---------|-----------|
| P7 | –ù–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —á–∞—Ç–æ–≤ | –ù–µ–ª—å–∑—è –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–æ–≤ | st.session_state ephemeral | üü¢ LOW |
| P8 | –ù–µ—Ç streaming –æ—Ç–≤–µ—Ç–æ–≤ | –î–æ–ª–≥–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ | LLM.invoke() –±–ª–æ–∫–∏—Ä—É—é—â–∏–π | üü¢ LOW |
| P9 | –ù–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∫–∞—á–µ—Å—Ç–≤–∞ retrieval | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–∏–¥–∏—Ç confidence | –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | üü¢ LOW |

---

### 15.4 Root Cause Analysis

```
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ  –ù–ò–ó–ö–û–ï –ö–ê–ß–ï–°–¢–í–û –û–¢–í–ï–¢–û–í    ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                  ‚îÇ
            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
            ‚ñº                     ‚ñº                     ‚ñº
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ –ü–ª–æ—Ö–æ–π Retrieval‚îÇ    ‚îÇ –°–ª–∞–±–∞—è Embedding  ‚îÇ   ‚îÇ LLM –ü—Ä–æ–±–ª–µ–º—ã ‚îÇ
   ‚îÇ                ‚îÇ    ‚îÇ Model             ‚îÇ   ‚îÇ              ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ                      ‚îÇ                     ‚îÇ
           ‚ñº                      ‚ñº                     ‚ñº
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ‚Ä¢ TOP_K=8 –º–∞–ª–æ ‚îÇ     ‚îÇ‚Ä¢ MiniLM-L12   ‚îÇ      ‚îÇ‚Ä¢ llama3 ‚Üí EN ‚îÇ
   ‚îÇ‚Ä¢ –ù–µ—Ç reranking‚îÇ     ‚îÇ  —Ç–æ–ª—å–∫–æ 384 dim‚îÇ     ‚îÇ‚Ä¢ –ì–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–∏‚îÇ
   ‚îÇ‚Ä¢ Chunking     ‚îÇ     ‚îÇ‚Ä¢ –°–ª–∞–±—ã–π —Ä—É—Å—Å–∫–∏–π‚îÇ     ‚îÇ‚Ä¢ –ù–µ —Å–ª–µ–¥—É–µ—Ç  ‚îÇ
   ‚îÇ  —Ä–∞–∑—Ä—ã–≤–∞–µ—Ç    ‚îÇ     ‚îÇ                ‚îÇ     ‚îÇ  –ø—Ä–æ–º–ø—Ç—É     ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 16. ROADMAP –£–õ–£–ß–®–ï–ù–ò–ô ‚≠ê

### –§–∞–∑–∞ 1: Quick Wins (1-2 –¥–Ω—è) ‚Äî –£–ª—É—á—à–µ–Ω–∏–µ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

| # | –£–ª—É—á—à–µ–Ω–∏–µ | –û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –°—Ç–∞—Ç—É—Å |
|---|-----------|------------------|-----------|--------|
| 1.1 | ‚úÖ –£–≤–µ–ª–∏—á–∏—Ç—å TOP_K –¥–æ 8 | +20% recall | Trivial | ‚úÖ DONE |
| 1.2 | ‚úÖ –£–≤–µ–ª–∏—á–∏—Ç—å chunk_size –¥–æ 1500 | –ú–µ–Ω—å—à–µ —Ä–∞–∑—Ä—ã–≤–æ–≤ —Å–ø–∏—Å–∫–æ–≤ | Trivial | ‚úÖ DONE |
| 1.3 | ‚úÖ –£–≤–µ–ª–∏—á–∏—Ç—å overlap –¥–æ 300 | –ë–æ–ª—å—à–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –Ω–∞ —Å—Ç—ã–∫–∞—Ö | Trivial | ‚úÖ DONE |
| 1.4 | ‚úÖ –£–ª—É—á—à–∏—Ç—å SYSTEM_PROMPT | "–î–∞–≤–∞–π –ü–û–î–†–û–ë–ù–´–ï –æ—Ç–≤–µ—Ç—ã" | Trivial | ‚úÖ DONE |
| 1.5 | ‚¨ú –î–æ–±–∞–≤–∏—Ç—å "–û—Ç–≤–µ—á–∞–π –Ω–∞ –†–£–°–°–ö–û–ú —è–∑—ã–∫–µ" –≤ –ø—Ä–æ–º–ø—Ç | –§–∏–∫—Å P3 | Trivial | TODO |
| 1.6 | ‚¨ú –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Ç–æ–≤ –≤ chat_history.jsonl | –ê–Ω–∞–ª–∏–∑ –∫–∞—á–µ—Å—Ç–≤–∞ | Easy | TODO |

### –§–∞–∑–∞ 2: Embedding Model Upgrade (3-5 –¥–Ω–µ–π)

| # | –£–ª—É—á—à–µ–Ω–∏–µ | –û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç | –°–ª–æ–∂–Ω–æ—Å—Ç—å |
|---|-----------|------------------|-----------|
| 2.1 | –ó–∞–º–µ–Ω–∏—Ç—å MiniLM –Ω–∞ `intfloat/multilingual-e5-large` | +30-50% –∫–∞—á–µ—Å—Ç–≤–æ retrieval –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ | Medium |
| 2.2 | –ò–ª–∏: `cointegrated/rubert-tiny2` | –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ | Medium |
| 2.3 | –î–æ–±–∞–≤–∏—Ç—å prefix –¥–ª—è E5: "query: " / "passage: " | –£–ª—É—á—à–µ–Ω–∏–µ retrieval | Easy |

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π:**

| –ú–æ–¥–µ–ª—å | –†–∞–∑–º–µ—Ä | –†—É—Å—Å–∫–∏–π —è–∑—ã–∫ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|--------|--------|--------------|--------------|
| paraphrase-multilingual-MiniLM-L12-v2 | 118M | ‚≠ê‚≠ê‚òÜ –°—Ä–µ–¥–Ω–µ | –¢–µ–∫—É—â–∞—è |
| intfloat/multilingual-e5-large | 560M | ‚≠ê‚≠ê‚≠ê‚≠ê –•–æ—Ä–æ—à–æ | –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è |
| intfloat/multilingual-e5-base | 278M | ‚≠ê‚≠ê‚≠ê –•–æ—Ä–æ—à–æ | –ë–∞–ª–∞–Ω—Å |
| cointegrated/rubert-tiny2 | 29M | ‚≠ê‚≠ê‚≠ê‚≠ê –û—Ç–ª–∏—á–Ω–æ –¥–ª—è RU | –î–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ |

### –§–∞–∑–∞ 3: Advanced Retrieval (1-2 –Ω–µ–¥–µ–ª–∏)

| # | –£–ª—É—á—à–µ–Ω–∏–µ | –û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç | –°–ª–æ–∂–Ω–æ—Å—Ç—å |
|---|-----------|------------------|-----------|
| 3.1 | Hybrid Search (BM25 + Vector) | –õ—É—á—à–µ –¥–ª—è —Ç–æ—á–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤ | Medium |
| 3.2 | Query Expansion (–ø–µ—Ä–µ—Ñ—Ä–∞–∑–∏—Ä–æ–≤–∫–∞ –≤–æ–ø—Ä–æ—Å–∞) | +20% recall | Medium |
| 3.3 | Reranking —Å cross-encoder | +25% precision –≤ TOP_K | Medium |
| 3.4 | Sentence-window retrieval | –ë–æ–ª—å—à–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤–æ–∫—Ä—É–≥ –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ | Hard |

**–ü—Ä–∏–º–µ—Ä Hybrid Search:**
```python
from langchain.retrievers import EnsembleRetriever
from langchain_community.retrievers import BM25Retriever

bm25 = BM25Retriever.from_documents(chunks, k=10)
vector = vectorstore.as_retriever(search_kwargs={"k": 10})
ensemble = EnsembleRetriever(
    retrievers=[bm25, vector],
    weights=[0.4, 0.6]
)
```

### –§–∞–∑–∞ 4: LLM Improvements (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

| # | –£–ª—É—á—à–µ–Ω–∏–µ | –û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç | –°–ª–æ–∂–Ω–æ—Å—Ç—å |
|---|-----------|------------------|-----------|
| 4.1 | –ó–∞–º–µ–Ω–∏—Ç—å llama3 –Ω–∞ llama3.1 –∏–ª–∏ llama3.2 | –õ—É—á—à–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ | Easy |
| 4.2 | –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å Qwen2.5 (—Ö–æ—Ä–æ—à –¥–ª—è –Ω–µ-EN) | –õ—É—á—à–µ —Ä—É—Å—Å–∫–∏–π | Easy |
| 4.3 | –î–æ–±–∞–≤–∏—Ç—å streaming –æ—Ç–≤–µ—Ç–æ–≤ | –õ—É—á—à–∏–π UX | Medium |
| 4.4 | Few-shot examples –≤ –ø—Ä–æ–º–ø—Ç–µ | –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–æ–≤ | Easy |

---

### 16.1 –ü—Ä–∏–æ—Ä–∏—Ç–µ–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

```
–ù–ï–î–ï–õ–Ø 1:
‚îú‚îÄ‚îÄ –î–µ–Ω—å 1-2: –§–∞–∑–∞ 1 (Quick Wins) ‚Äî –¥–æ–±–∞–≤–∏—Ç—å RU –≤ –ø—Ä–æ–º–ø—Ç, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ –î–µ–Ω—å 3-4: –§–∞–∑–∞ 2.1 ‚Äî —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ multilingual-e5-large
‚îî‚îÄ‚îÄ –î–µ–Ω—å 5: –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∏–Ω–¥–µ–∫—Å–∞, —Å—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ù–ï–î–ï–õ–Ø 2:
‚îú‚îÄ‚îÄ –î–µ–Ω—å 1-2: –§–∞–∑–∞ 3.1 ‚Äî Hybrid Search (BM25)
‚îú‚îÄ‚îÄ –î–µ–Ω—å 3-4: –§–∞–∑–∞ 3.2 ‚Äî Query Expansion
‚îî‚îÄ‚îÄ –î–µ–Ω—å 5: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ù–ï–î–ï–õ–Ø 3+:
‚îú‚îÄ‚îÄ –§–∞–∑–∞ 3.3: Reranking
‚îú‚îÄ‚îÄ –§–∞–∑–∞ 4: LLM —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã
‚îî‚îÄ‚îÄ –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞, A/B —Ç–µ—Å—Ç—ã
```

---

### 16.2 –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | –¶–µ–ª—å |
|---------|------------------|------|
| Accuracy (—Å—É–±—ä–µ–∫—Ç–∏–≤–Ω–æ) | ~55% | 85%+ |
| Retrieval Recall@8 | ~60% | 90%+ |
| –û—Ç–≤–µ—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —è–∑—ã–∫–µ | ~80% | 100% |
| –ì–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–∏ | ~20% –≤–æ–ø—Ä–æ—Å–æ–≤ | <5% |
| –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ | 5-15 —Å–µ–∫ | <10 —Å–µ–∫ |

---

## 17. FAQ –∏ —Ä–µ—à–µ–Ω–∏—è

**Q: –ü–æ—á–µ–º—É –º–æ–¥–µ–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º?**
A: llama3 –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ –æ–±—É—á–µ–Ω–∞ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º. –†–µ—à–µ–Ω–∏–µ: –¥–æ–±–∞–≤–∏—Ç—å –≤ –ø—Ä–æ–º–ø—Ç "–û—Ç–≤–µ—á–∞–π –¢–û–õ–¨–ö–û –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ" –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–¥–µ–ª—å —Å –ª—É—á—à–µ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä—É—Å—Å–∫–æ–≥–æ (Qwen2.5, Mistral-v0.3).

**Q: –ö–∞–∫ –ø–æ–Ω—è—Ç—å, —á—Ç–æ retriever –Ω–∞—à—ë–ª –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —á–∞–Ω–∫–∏?**
A: –í–∫–ª—é—á–∏—Ç—å DEBUG_DUMP_CHUNKS=1, –Ω–∞–π—Ç–∏ –≤–æ–ø—Ä–æ—Å –≤ chunks.jsonl, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —ç—Ç–∏ —á–∞–Ω–∫–∏ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –æ—Ç–≤–µ—Ç–∞.

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å OpenAI –≤–º–µ—Å—Ç–æ Ollama?**
A: –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –¥–∞, –Ω–æ —ç—Ç–æ –Ω–∞—Ä—É—à–∞–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø –ø—Ä–æ–µ–∫—Ç–∞ (–ª–æ–∫–∞–ª—å–Ω—ã–π, –±–µ–∑ –æ–±–ª–∞–∫–æ–≤). –ï—Å–ª–∏ –Ω—É–∂–Ω–æ ‚Äî –∑–∞–º–µ–Ω–∏—Ç–µ `OllamaLLM` –Ω–∞ `ChatOpenAI`.

**Q: –°–∫–æ–ª—å–∫–æ RAM –Ω—É–∂–Ω–æ –¥–ª—è llama3?**
A: ~5GB –¥–ª—è llama3:8b. –ï—Å–ª–∏ –º–∞–ª–æ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ phi3 (~2GB) –∏–ª–∏ tinyllama (~1GB).

---

## 18. –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç 1strag –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Ä–∞–±–æ—Ç–∞—é—â–∏–π MVP –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ RAG-—á–∞—Ç–±–æ—Ç–∞ —Å –ø—Ä–æ—Å—Ç–æ–π –∏ –ø–æ–Ω—è—Ç–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π. –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å–≤—è–∑–∞–Ω—ã –Ω–µ —Å –∫–æ–¥–æ–º, –∞ —Å –≤—ã–±–æ—Ä–æ–º –º–æ–¥–µ–ª–µ–π:

1. **Embedding model** —Å–ª–∞–±–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ä—É—Å—Å–∫–∏–º —è–∑—ã–∫–æ–º ‚Üí –Ω—É–∂–Ω–∞ –∑–∞–º–µ–Ω–∞ –Ω–∞ E5/RuBERT
2. **LLM** –∏–Ω–æ–≥–¥–∞ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –ø—Ä–æ–º–ø—Ç –∏ —è–∑—ã–∫ ‚Üí –Ω—É–∂–Ω–∞ –±–æ–ª–µ–µ –∏–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω–∞—è –º–æ–¥–µ–ª—å
3. **Retrieval** –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ—á–Ω—ã–π ‚Üí –Ω—É–∂–µ–Ω hybrid search + reranking

–ü—Ä–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ñ–∞–∑ 1-3 –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤ –¥–æ–ª–∂–Ω–æ –≤—ã—Ä–∞—Å—Ç–∏ —Å —Ç–µ–∫—É—â–∏—Ö ~55% –¥–æ 85%+.

---

*–î–æ–∫—É–º–µ–Ω—Ç –æ–±–Ω–æ–≤–ª—ë–Ω: 21 —è–Ω–≤–∞—Ä—è 2026*
