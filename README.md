# üìö 1strag ‚Äî RAG-—á–∞—Ç–±–æ—Ç –ø–æ —Ä—É—Å—Å–∫–∏–º PDF

–õ–æ–∫–∞–ª—å–Ω—ã–π —á–∞—Ç–±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É PDF-—Ñ–∞–π–ª–æ–≤ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (—Ñ–∞–π–ª + —Å—Ç—Ä–∞–Ω–∏—Ü–∞).

## üéØ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ü–æ–ª–Ω–æ—Å—Ç—å—é –ª–æ–∫–∞–ª—å–Ω—ã–π**: Ollama –¥–ª—è LLM, FAISS –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
- **–†—É—Å—Å–∫–∏–π —Ç–µ–∫—Å—Ç**: –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω—ã–µ embeddings
- **–ü–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–µ —Ü–∏—Ç–∞—Ç—ã**: –ö–∞–∂–¥—ã–π –æ—Ç–≤–µ—Ç —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞**: –¢–æ–ª—å–∫–æ —Ñ—É–Ω–∫—Ü–∏–∏, –±–µ–∑ –∫–ª–∞—Å—Å–æ–≤, –±–µ–∑ –æ–±–ª–∞–∫–æ–≤

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ Ollama

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (–æ–¥–∏–Ω —Ä–∞–∑)
curl -fsSL https://ollama.com/install.sh | sh

# –°–∫–∞—á–∞—Ç—å –º–æ–¥–µ–ª—å
ollama pull qwen2.5:14b

# –ó–∞–ø—É—Å—Ç–∏—Ç—å Ollama (–µ—Å–ª–∏ –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞)
ollama serve
```

### 3. –î–æ–±–∞–≤–∏—Ç—å PDF —Ñ–∞–π–ª—ã

–ü–æ–ª–æ–∂–∏—Ç–µ –≤–∞—à–∏ PDF —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫—É `books/`.

> ‚ö†Ô∏è **–í–∞–∂–Ω–æ:** PDF —Ñ–∞–π–ª—ã –Ω–µ –≤–∫–ª—é—á–µ–Ω—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø–æ –ø—Ä–∏—á–∏–Ω–∞–º –∞–≤—Ç–æ—Ä—Å–∫–æ–≥–æ –ø—Ä–∞–≤–∞. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã.

### 4. –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –∏–Ω–¥–µ–∫—Å

```bash
python rag_setup.py
```

### 5. –ó–∞–ø—É—Å—Ç–∏—Ç—å —á–∞—Ç

```bash
streamlit run app.py
```

---

## ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –£–º–æ–ª—á–∞–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|-----------|----------|
| `MAX_TOKENS` | `800` | –†–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞ –≤ —Ç–æ–∫–µ–Ω–∞—Ö (HybridChunker) |
| `TOP_K` | `16` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ retrieval |
| `EMBED_MODEL` | `intfloat/multilingual-e5-base` | –ú–æ–¥–µ–ª—å embeddings |
| `OLLAMA_MODEL` | `qwen2.5:14b` | –ú–æ–¥–µ–ª—å Ollama |
| `DEBUG_DUMP_CHUNKS` | `0` | –°–æ—Ö—Ä–∞–Ω—è—Ç—å —á–∞–Ω–∫–∏ –≤ `chunks.jsonl` –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ |
| `BOOKS_DIR` | `books/` | –ü–∞–ø–∫–∞ —Å PDF —Ñ–∞–π–ª–∞–º–∏ |
| `INDEX_DIR` | `rag_index/` | –ü–∞–ø–∫–∞ –¥–ª—è FAISS –∏–Ω–¥–µ–∫—Å–∞ |

–ü—Ä–∏–º–µ—Ä:
```bash
export MAX_TOKENS=1000
export OLLAMA_MODEL=qwen2.5:7b
python rag_setup.py
```

---

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ Codespaces

1. –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ `streamlit run app.py` –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –ø–æ—Ä—Ç **8501**
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤–æ –≤–∫–ª–∞–¥–∫—É **Ports** –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ forwarded port
3. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ URL: `https://<codespace-name>-8501.app.github.dev`

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### allow_dangerous_deserialization

–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ FAISS –∏–Ω–¥–µ–∫—Å–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `allow_dangerous_deserialization=True`. –≠—Ç–æ **–±–µ–∑–æ–ø–∞—Å–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–∞—à–∏—Ö —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤**.

> ‚ö†Ô∏è **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–π—Ç–µ —á—É–∂–∏–µ –∏–Ω–¥–µ–∫—Å—ã** (`rag_index/` –æ—Ç –¥—Ä—É–≥–∏—Ö –ª—é–¥–µ–π). Pickle-—Ñ–∞–π–ª—ã –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–π –∫–æ–¥.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
1strag/
‚îú‚îÄ‚îÄ app.py                  # Streamlit UI + —á–∞—Ç
‚îú‚îÄ‚îÄ rag_setup.py            # –°–±–æ—Ä–∫–∞ –∏–Ω–¥–µ–∫—Å–∞
‚îú‚îÄ‚îÄ requirements.txt        # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ README.md               # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ TECHNICAL_SPEC.md       # –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îú‚îÄ‚îÄ AntiOverengineering_RULES.md  # –ü—Ä–∞–≤–∏–ª–∞ KISS/YAGNI
‚îú‚îÄ‚îÄ .gitignore
‚îÇ
‚îú‚îÄ‚îÄ books/                  # PDF –¥–ª—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ (–≤–∞—à–∏ —Ñ–∞–π–ª—ã)
‚îÇ   ‚îî‚îÄ‚îÄ .gitkeep
‚îÇ
‚îî‚îÄ‚îÄ rag_index/              # FAISS –∏–Ω–¥–µ–∫—Å (—Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
    ‚îú‚îÄ‚îÄ index.faiss
    ‚îú‚îÄ‚îÄ index.pkl
    ‚îî‚îÄ‚îÄ config.json
```

---

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [TECHNICAL_SPEC.md](TECHNICAL_SPEC.md) ‚Äî –ø–æ–ª–Ω–æ–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
- [AntiOverengineering_RULES.md](AntiOverengineering_RULES.md) ‚Äî –ø—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT